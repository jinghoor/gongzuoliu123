# 🎯 开始部署 - 一步一步指南

## ✅ 当前进度

我已经为你完成了以下准备工作：
- ✅ 修改了前端代码，支持环境变量配置 API 地址
- ✅ 创建了所有部署配置文件（Vercel、Railway、Render 等）
- ✅ 初始化了 Git 仓库
- ✅ 提交了所有代码到本地仓库

## 📋 接下来你需要做的（总共约 25 分钟）

---

## 第一步：配置 Git 用户信息（1分钟）

在终端执行以下命令（替换为你的信息）：

```bash
git config --global user.name "你的名字"
git config --global user.email "你的邮箱"
```

例如：
```bash
git config --global user.name "Max"
git config --global user.email "max@example.com"
```

---

## 第二步：在 GitHub 创建仓库（3分钟）

### 2.1 访问 GitHub
打开浏览器，访问：https://github.com/new

### 2.2 填写仓库信息
- **Repository name**: `cross-border-workflow`（或你喜欢的名字）
- **Description**: 跨境电商工作流系统（可选）
- **Visibility**: 选择 **Public**（免费平台需要公开仓库）
- ⚠️ **重要**：**不要**勾选 "Add a README file"、"Add .gitignore"、"Choose a license"

### 2.3 创建仓库
点击绿色的 **"Create repository"** 按钮

### 2.4 复制仓库 URL
创建成功后，GitHub 会显示仓库 URL，类似：
```
https://github.com/你的用户名/cross-border-workflow.git
```
**请复制这个 URL！** 📝

---

## 第三步：推送代码到 GitHub（5分钟）

### 3.1 在终端执行以下命令

打开终端，执行：

```bash
cd "/Users/maxj/Documents/Python项目/项目91-跨境电商工作流"
```

### 3.2 添加远程仓库

```bash
git remote add origin https://github.com/你的用户名/仓库名.git
```
（替换为你在第二步复制的 URL）

### 3.3 推送到 GitHub

```bash
git branch -M main
git push -u origin main
```

### 3.4 处理认证问题

如果提示需要认证，有两种方式：

**方式一：使用 Personal Access Token（推荐）**
1. 访问：https://github.com/settings/tokens
2. 点击 "Generate new token" → "Generate new token (classic)"
3. 填写名称，勾选 `repo` 权限
4. 点击 "Generate token"
5. **复制生成的 token**（只显示一次！）
6. 当 Git 要求输入密码时，粘贴这个 token

**方式二：使用 GitHub CLI**
```bash
# 安装 GitHub CLI（如果还没安装）
brew install gh

# 登录
gh auth login

# 然后再次推送
git push -u origin main
```

---

## 第四步：部署后端到 Railway（10分钟）

### 4.1 注册 Railway
1. 打开：https://railway.app
2. 点击 **"Login"** 或 **"Start a New Project"**
3. 选择 **"Login with GitHub"**
4. 授权 Railway 访问你的 GitHub

### 4.2 创建新项目
1. 登录后，点击 **"New Project"**
2. 选择 **"Deploy from GitHub repo"**
3. 在列表中找到你的仓库 `cross-border-workflow`
4. 点击仓库，Railway 会自动开始部署

### 4.3 配置后端服务 ⚠️ 重要！

Railway 可能自动检测，但我们需要手动配置：

1. **找到服务卡片**，点击进入服务详情
2. 点击 **"Settings"** 标签
3. 找到 **"Source"** 部分，点击 **"Configure"**
4. 设置以下配置：
   - **Root Directory**: 输入 `backend`
   - **Build Command**: `npm install && npm run build`
   - **Start Command**: `npm start`
5. 点击 **"Save"** 或 **"Deploy"**

### 4.4 添加环境变量
1. 在服务页面，点击 **"Variables"** 标签
2. 点击 **"New Variable"**
3. 添加：
   - **Name**: `NODE_ENV`
   - **Value**: `production`
4. 点击 **"Add"**

### 4.5 等待部署完成
- 部署通常需要 2-5 分钟
- 可以在 **"Deployments"** 标签查看进度
- 看到绿色的 "Deployed" 表示成功

### 4.6 获取后端 URL 📝
1. 部署成功后，点击 **"Settings"** 标签
2. 找到 **"Networking"** 部分
3. 你会看到一个 **"Public Domain"**，类似：
   ```
   https://xxx-production.up.railway.app
   ```
4. **复制这个 URL！这是你的后端地址！**

### 4.7 测试后端
在浏览器中访问你的后端 URL，应该能看到响应。

---

## 第五步：部署前端到 Vercel（10分钟）

### 5.1 注册 Vercel
1. 打开：https://vercel.com
2. 点击 **"Sign Up"**
3. 选择 **"Continue with GitHub"**
4. 授权 Vercel 访问你的 GitHub

### 5.2 导入项目
1. 登录后，点击 **"Add New Project"** 或 **"Import Project"**
2. 在仓库列表中找到你的 `cross-border-workflow` 仓库
3. 点击 **"Import"**

### 5.3 配置项目
在配置页面：

1. **Framework Preset**: 应该自动检测为 **"Vite"**，如果没有，选择 "Vite"
2. **Root Directory**: 
   - 点击 **"Edit"** 按钮
   - 输入 `frontend`
   - 点击 **"Continue"**
3. **Build and Output Settings**（通常已自动填充）：
   - **Build Command**: `npm run build`
   - **Output Directory**: `dist`
   - **Install Command**: `npm install`

### 5.4 添加环境变量 ⚠️ 非常重要！

这是最关键的一步！

1. 在配置页面，找到 **"Environment Variables"** 部分
2. 点击 **"Add"** 或输入框
3. 添加以下变量：
   - **Name**: `VITE_API_BASE_URL`
   - **Value**: 粘贴你在第四步获取的 Railway 后端 URL
     ```
     例如：https://xxx-production.up.railway.app
     ```
   - **Environment**: 勾选所有三个选项：
     - ✅ Production
     - ✅ Preview  
     - ✅ Development
4. 点击 **"Add"** 或 **"Save"**

### 5.5 部署
1. 确认配置正确后，点击绿色的 **"Deploy"** 按钮
2. 等待构建完成（通常 1-3 分钟）
3. 构建过程中可以看到实时日志

### 5.6 获取前端 URL 🎉
部署成功后，你会看到一个 URL，类似：
```
https://cross-border-workflow.vercel.app
```
**这就是你的应用地址！**

---

## 第六步：测试应用

### 6.1 访问应用
在浏览器中打开 Vercel 给你的 URL

### 6.2 检查功能
1. ✅ 页面正常加载
2. ✅ 可以创建新工作流
3. ✅ 可以保存工作流
4. ✅ 可以加载已有工作流

### 6.3 检查错误
1. 打开浏览器开发者工具（按 F12）
2. 查看 **Console** 标签
3. 确认没有红色错误
4. 如果有 CORS 错误，检查环境变量是否正确

---

## 🎉 完成！

恭喜！你的应用已经成功部署到云端了！

### 你的应用地址：
- **前端（用户访问）**: `https://你的项目名.vercel.app`
- **后端 API**: `https://你的项目名.railway.app`

---

## 📝 后续操作

### 更新代码
当你修改代码后：
1. 提交到本地：`git add . && git commit -m "更新说明"`
2. 推送到 GitHub：`git push`
3. Railway 和 Vercel 会自动重新部署（通常 1-3 分钟）

### 查看日志
- **Railway**: 在服务页面点击 "View Logs"
- **Vercel**: 在项目页面点击 "Deployments" → 选择部署 → "View Function Logs"

### 自定义域名（可选）
- **Vercel**: 在项目 Settings → Domains 添加你的域名
- **Railway**: 在服务 Settings → Networking 添加自定义域名

---

## 🐛 遇到问题？

### 前端无法连接后端
- ✅ 检查 Vercel 环境变量 `VITE_API_BASE_URL` 是否正确
- ✅ 检查后端 URL 是否可访问（在浏览器打开）
- ✅ 查看浏览器 Console 的错误信息

### 构建失败
- ✅ 查看构建日志，找到错误信息
- ✅ 确认 Node.js 版本（需要 20+）
- ✅ 检查代码是否有语法错误

### 数据丢失
- ✅ Railway 免费层数据会持久化
- ✅ 如果数据丢失，检查服务是否正常运行

---

## 📞 需要帮助？

如果遇到问题：
1. 查看详细文档：`DEPLOY_STEPS.md`
2. 查看快速指南：`QUICK_START.md`
3. 检查各平台的文档和日志

**祝你部署顺利！** 🚀

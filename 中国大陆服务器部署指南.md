# ä¸­å›½å¤§é™†æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—ä¸“é—¨é’ˆå¯¹ä¸­å›½å¤§é™†æœåŠ¡å™¨ï¼Œä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿå®‰è£…ã€‚

## ðŸš€ ä¸€é”®éƒ¨ç½²ï¼ˆæŽ¨èï¼‰

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# ä¸‹è½½éƒ¨ç½²è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/jinghoor/gongzuoliu123/main/china-deploy.sh -o china-deploy.sh

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x china-deploy.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
bash china-deploy.sh
```

## ðŸ“‹ ä½¿ç”¨çš„å›½å†…é•œåƒæº

### Docker å®‰è£…
- **é˜¿é‡Œäº‘ Docker é•œåƒæº**: `https://mirrors.aliyun.com/docker-ce/linux/ubuntu`
- **å¤‡ç”¨æ–¹æ¡ˆ**: å®˜æ–¹å®‰è£…è„šæœ¬ + é˜¿é‡Œäº‘é•œåƒå‚æ•°

### Docker é•œåƒåŠ é€Ÿå™¨
é…ç½®äº†ä»¥ä¸‹å›½å†…é•œåƒåŠ é€Ÿå™¨ï¼š
- ä¸­ç§‘å¤§é•œåƒ: `https://docker.mirrors.ustc.edu.cn`
- ç½‘æ˜“é•œåƒ: `https://hub-mirror.c.163.com`
- ç™¾åº¦äº‘é•œåƒ: `https://mirror.baidubce.com`
- è…¾è®¯äº‘é•œåƒ: `https://ccr.ccs.tencentyun.com`

### GitHub è®¿é—®
- ä½¿ç”¨ GitHub ä»£ç†: `https://ghproxy.com/`
- å¦‚æžœç›´æŽ¥è®¿é—® GitHub å¤±è´¥ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä»£ç†

## ðŸ”§ æ‰‹åŠ¨é…ç½®ï¼ˆå¦‚æžœè‡ªåŠ¨è„šæœ¬å¤±è´¥ï¼‰

### 1. é…ç½® Docker é•œåƒæº

```bash
# åˆ›å»ºç›®å½•
mkdir -p /etc/apt/keyrings

# æ·»åŠ é˜¿é‡Œäº‘ Docker é•œåƒæº
cat > /etc/apt/sources.list.d/docker.list << 'EOF'
deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu focal stable
EOF

# æ·»åŠ  GPG key
curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg
chmod a+r /etc/apt/keyrings/docker.gpg

# æ›´æ–°å¹¶å®‰è£…
apt update
apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### 2. é…ç½® Docker é•œåƒåŠ é€Ÿå™¨

```bash
mkdir -p /etc/docker
cat > /etc/docker/daemon.json << 'EOF'
{
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com",
    "https://mirror.baidubce.com",
    "https://ccr.ccs.tencentyun.com"
  ]
}
EOF

systemctl daemon-reload
systemctl restart docker
```

### 3. å®‰è£… Docker Composeï¼ˆä½¿ç”¨ä»£ç†ï¼‰

```bash
# ä½¿ç”¨ GitHub ä»£ç†ä¸‹è½½
curl -L "https://ghproxy.com/https://github.com/docker/compose/releases/download/v2.24.5/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose

chmod +x /usr/local/bin/docker-compose
ln -sf /usr/local/bin/docker-compose /usr/bin/docker-compose
```

### 4. å…‹éš†é¡¹ç›®ï¼ˆä½¿ç”¨ä»£ç†ï¼‰

```bash
# å¦‚æžœç›´æŽ¥å…‹éš†å¤±è´¥ï¼Œä½¿ç”¨ä»£ç†
git clone https://ghproxy.com/https://github.com/jinghoor/gongzuoliu123.git /opt/workflow
```

## ðŸŒ å›½å†…é•œåƒæºåˆ—è¡¨

### Docker å®˜æ–¹é•œåƒæº
- é˜¿é‡Œäº‘: `https://mirrors.aliyun.com/docker-ce/linux/ubuntu`
- æ¸…åŽå¤§å­¦: `https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu`
- ä¸­ç§‘å¤§: `https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu`

### Docker Hub é•œåƒåŠ é€Ÿå™¨
- ä¸­ç§‘å¤§: `https://docker.mirrors.ustc.edu.cn`
- ç½‘æ˜“: `https://hub-mirror.c.163.com`
- ç™¾åº¦äº‘: `https://mirror.baidubce.com`
- è…¾è®¯äº‘: `https://ccr.ccs.tencentyun.com`
- é˜¿é‡Œäº‘: `https://registry.cn-hangzhou.aliyuncs.com`ï¼ˆéœ€è¦ç™»å½•ï¼‰

### GitHub ä»£ç†
- ghproxy.com: `https://ghproxy.com/`
- ghps.cc: `https://ghps.cc/`
- fastgit.org: `https://hub.fastgit.xyz/`

## ðŸ” éªŒè¯é•œåƒé…ç½®

### æ£€æŸ¥ Docker é•œåƒåŠ é€Ÿå™¨

```bash
# æŸ¥çœ‹é…ç½®
cat /etc/docker/daemon.json

# æµ‹è¯•æ‹‰å–é•œåƒé€Ÿåº¦
docker pull hello-world
```

### æ£€æŸ¥ Docker ç‰ˆæœ¬

```bash
docker --version
docker-compose --version
```

## âš¡ åŠ é€ŸæŠ€å·§

### 1. ä½¿ç”¨å›½å†… Git é•œåƒï¼ˆå¯é€‰ï¼‰

```bash
# é…ç½® Git ä½¿ç”¨ä»£ç†
git config --global url."https://ghproxy.com/https://github.com/".insteadOf "https://github.com/"
```

### 2. ä½¿ç”¨å›½å†… npm é•œåƒï¼ˆå¦‚æžœéœ€è¦ï¼‰

```bash
# å¦‚æžœé¡¹ç›®éœ€è¦ npmï¼Œé…ç½®æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com
```

### 3. ä½¿ç”¨å›½å†… pip é•œåƒï¼ˆå¦‚æžœéœ€è¦ï¼‰

```bash
# å¦‚æžœé¡¹ç›®éœ€è¦ pipï¼Œé…ç½®æ¸…åŽé•œåƒ
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

## ðŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1: Docker å®‰è£…ä»ç„¶å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬ + é˜¿é‡Œäº‘é•œåƒ
curl -fsSL https://get.docker.com | bash -s -- --mirror Aliyun
```

### é—®é¢˜ 2: GitHub è®¿é—®å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä½¿ç”¨ä»£ç†å…‹éš†
git clone https://ghproxy.com/https://github.com/jinghoor/gongzuoliu123.git /opt/workflow

# æˆ–é…ç½® Git å…¨å±€ä»£ç†
git config --global url."https://ghproxy.com/https://github.com/".insteadOf "https://github.com/"
```

### é—®é¢˜ 3: Docker é•œåƒæ‹‰å–æ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥é•œåƒåŠ é€Ÿå™¨é…ç½®
cat /etc/docker/daemon.json

# é‡å¯ Docker
systemctl restart docker

# æµ‹è¯•æ‹‰å–é€Ÿåº¦
time docker pull node:20-alpine
```

### é—®é¢˜ 4: æž„å»ºé•œåƒæ—¶ä¸‹è½½ä¾èµ–æ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ Docker é•œåƒåŠ é€Ÿå™¨å·²é…ç½®
- æž„å»ºæ—¶ä¼šè‡ªåŠ¨ä½¿ç”¨é…ç½®çš„é•œåƒåŠ é€Ÿå™¨
- å¦‚æžœä½¿ç”¨ npmï¼Œå¯ä»¥åœ¨ Dockerfile ä¸­é…ç½® npm é•œåƒ

## ðŸ“ å®Œæ•´æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

å¦‚æžœè‡ªåŠ¨è„šæœ¬å¤±è´¥ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨éƒ¨ç½²ï¼š

```bash
# 1. å®‰è£… Dockerï¼ˆä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼‰
curl -fsSL https://get.docker.com | bash -s -- --mirror Aliyun

# 2. é…ç½®é•œåƒåŠ é€Ÿå™¨
mkdir -p /etc/docker
cat > /etc/docker/daemon.json << 'EOF'
{
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com"
  ]
}
EOF
systemctl restart docker

# 3. å®‰è£… Docker Composeï¼ˆä½¿ç”¨ä»£ç†ï¼‰
curl -L "https://ghproxy.com/https://github.com/docker/compose/releases/download/v2.24.5/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# 4. å…‹éš†é¡¹ç›®ï¼ˆä½¿ç”¨ä»£ç†ï¼‰
mkdir -p /opt/workflow
cd /opt/workflow
git clone https://ghproxy.com/https://github.com/jinghoor/gongzuoliu123.git .

# 5. é…ç½®çŽ¯å¢ƒ
mkdir -p data uploads logs
cat > .env << 'EOF'
PORT=1888
NODE_ENV=production
DOUBAO_API_KEY=09484874-9519-4aa3-9cd4-f84ef0c6d44e
EOF

# 6. å¯åŠ¨æœåŠ¡
docker-compose up -d --build

# 7. éªŒè¯
docker-compose ps
curl http://localhost:1888/health
```

## âœ… éƒ¨ç½²æˆåŠŸæ ‡å¿—

- âœ… `docker --version` æ˜¾ç¤ºç‰ˆæœ¬å·
- âœ… `docker-compose --version` æ˜¾ç¤ºç‰ˆæœ¬å·
- âœ… `docker-compose ps` æ˜¾ç¤ºå®¹å™¨çŠ¶æ€ä¸º "Up"
- âœ… `curl http://localhost:1888/health` è¿”å›žæˆåŠŸ
- âœ… æµè§ˆå™¨å¯ä»¥è®¿é—® `http://your-server-ip:1888`

## ðŸ“ž èŽ·å–å¸®åŠ©

å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. `docker --version` çš„è¾“å‡º
2. `cat /etc/docker/daemon.json` çš„å†…å®¹
3. `docker-compose ps` çš„è¾“å‡º
4. `docker-compose logs` çš„è¾“å‡º

è¿™äº›ä¿¡æ¯å¯ä»¥å¸®åŠ©è¿›ä¸€æ­¥è¯Šæ–­é—®é¢˜ã€‚
